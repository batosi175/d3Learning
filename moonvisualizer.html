<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>D3 Force Graph</title>
    <script type="text/javascript" src="d3/d3.v3.js"></script>
    <style type="text/css">

    </style>
  </head>
  <body>
    <div id="grid"></div>

    <script type="text/javascript">
      //gives us data
      function gridData() {
        var data = new Array();
        var xpos = 1;
        var ypos = 1;
        var width = 50;
        var height = 50;
        var click = 0;

        // iterate for rows
        for (var row = 0; row < 10; row++) {
          data.push(new Array() );
          //go over cells/columns
          for (var column = 0; column < 10; column ++) {
            //randomized clicks
            click = Math.round(Math.random() * 100 );
            data[row].push({
              x: xpos,
              y: ypos,
              width: width,
              height: height,
              click: click
            })
            xpos += width;
          }
          //reset x position
          xpos = 1;

          // increment y position for new row
          ypos += height;
        }
        return data;
      }

      var gridData = gridData();

      console.log(gridData);

      var grid = d3.select("#grid")
        .append("svg")
          .attr("width", "510px")
          .attr("height", "510px")
      ;
      var row = grid.selectAll(".row")
        .data(gridData)
        .enter().append("g")
          .attr("class", "row")
      ;
      var column = row.selectAll(".square")
        .data(function(d) { return d; })
        .enter().append("rect")
          .attr("class", "square")
          .attr("x", function(d) { return d.x; })
          .attr("y", function(d) { return d.y; })
          .attr("width", function(d) { return d.width; })
          .attr("height", function(d) { return d.height; })
          .style("fill", "#fff")
          .style("stroke", "#222")

          .on('click', function(d) {
            d.click ++;
            if ((d.click)%4 == 0 ) { d3.select(this).style("fill", "#fff"); }
            if ((d.click)%4 == 1 ) { d3.select(this).style("fill", "#2c93E8"); }
            if ((d.click)%4 == 2 ) { d3.select(this).style("fill", "#F56C4E"); }
            if ((d.click)%4 == 3 ) { d3.select(this).style("fill", "#838690"); }
          })
          .style("fill", function(d) {
            if ((d.click)%4 == 0 ) { return  "#fff"; }
            if ((d.click)%4 == 1 ) { return  "#2c93E8"; }
            if ((d.click)%4 == 2 ) { return  "#F56C4E"; }
            if ((d.click)%4 == 3 ) { return  "#838690"; }
          })
      ;
    </script>
  </body>
</html>
